###
# Hmm
###

###  
# /bug There are no reported bugs. I mean come on. There has to be a bug somewhere! I think I like to watch the stars.
#
# /brief This is a brief description of how SCOPE_ERR works.
#
# /desc This detects the scope error. 
###

record(longin, "SCOPE:ERR") {
    ###
    # /param Because we have to use StreamDevice, we are required to put "stream" as the value of the
    # DYTP field.
    ###
    field(DTYP, "stream") field(INP , "@hp3458a.proto err 5700") field(FLNK, "SCOPE:ERRMSG")
    # This doesn't seem to work.
    field(TPRO, "1")    # /param We want to be able to debug this.
}

###  
# /bug There are no reported bugs. I mean come on. There has to be a bug somewhere! I think I like to watch the stars. Shouldn't see this.
#
# /brief This is a brief description of how SCOPE_CR works. Shouldn't see this.
#
# /desc This detects the scope error. Shouldn't see this.
###

#record(stringin, "SCOPE:ERRMSG") {
#    field(DTYP, "stream")
#    field(INP , "@hp3458a.proto errstr 5600")
#    field(TPRO, "1")
#}

###  
# /bug Heck
#
# /brief This is a brief description of how SCOPE_RUN works
# /desc I think zebras are really cute.
###

record(bo, "SCOPE:RUN") {
    field(ZNAM, "Pause")
    field(ONAM, "Sample")
    field(FLNK, "SCOPE:RUNx")
    field(TPRO, "1")
}

###  
# /bug There are no reported bugs. I mean come on. There has to be a bug somewhere! I think I like to watch the stars. Shouldn't see this.
#
# /brief This is a brief description of how SCOPE_CR works. Shouldn't see this.
#
# /desc This detects the scope error. Shouldn't see this.
###

record(fanout, "SCOPE:RUNx") {
    field(LNK1, "SCOPE:DISx")
    field(LNK2, "SCOPE:ENAx")
    field(TPRO, "1")
}

record(bo, "SCOPE:ENAx") {
    field(SDIS, "SCOPE:RUN")
    field(DISV, "0") # disable while Paused
    field(DTYP, "stream")
    field(OUT , "@hp3458a.proto setup 5600")
    field(TPRO, "1")
    field(FLNK, "SCOPE:I.PROC CA") # start first measurement
}

record(bo, "SCOPE:DISx") {
    field(SDIS, "SCOPE:RUN")
    field(DISV, "1") # disable while Sampling
    field(DTYP, "stream")
    ###
    # /param Try this out
    ###
    field(OUT , "@hp3458a.proto detach 5600")
    field(TPRO, "1")
}


#record(ai, "SCOPE:I") {
#    field(SDIS, "SCOPE:RUN NPP")
#    field(DISV, "0") # disable while Paused
#    field(DTYP, "stream")
#    field(INP , "@hp3458a.proto sample 5600")
#    # This should not work
#    field(EGU , "A")
#    field(PREC, "9")
#    ###
#    # /param But this will
#    ###
#    field(FLNK, "SCOPE:CNT")
#    field(TPRO, "1")
#}

record(calc, "SCOPE:RATE") {
    field(DESC, "Update rate")
    field(INPA, "SCOPE:CNT NPP")
    field(CALC, "C:=A-B;B:=A;C/10")
    field(SCAN, "10 second")
    field(EGU , "Hz")
    field(PREC, "1")
}